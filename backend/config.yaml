# Perplexity Local Agent - Configuration

# Safety modules settings
safety:
  # Internet safety with VirusTotal
  virustotal:
    enabled: true
    api_key: "210aa3d402bf884e04b84ad745b5e04fedae640982f2e364b1a3944841889e52"  # Get from https://www.virustotal.com/
    scan_timeout: 120
    max_file_size_mb: 100
    auto_delete_dangerous: true
    
  # User confirmation system
  confirmation:
    enabled: true
    require_confirmation: true  # Ask before every PC action
    show_info_button: true  # Show INFO with detailed action description
    timeout_seconds: 60
    auto_deny_dangerous: true
    
  # Self-protection
  self_protection:
    enabled: true
    protect_backend: true  # Block modifications to backend/ directory
    protect_config: true  # Block modifications to config.yaml
    check_integrity: true  # Check file hashes on startup
    critical_files:
      - "agent.py"
      - "self_protection.py"
      - "confirmation_system.py"
      - "internet_safety.py"
      - "config.yaml"

# Vision & Input Control settings
vision:
  enabled: true
  screenshot_interval: 1.0  # seconds
  ocr_enabled: true
  
input_control:
  enabled: true
  mouse_control: true
  keyboard_control: true
  
# Autonomous agent settings
autonomous:
  enabled: true
  auto_propose_projects: true
  require_approval: true  # Always ask before starting autonomous projects
  
# Telegram bot settings
telegram:
  enabled: false  # Set to true and add token to enable
  bot_token: "8253285683:AAEg2_soyuwXWCXrjZTSNErjhJlAc2KOWnQ"
  allowed_users: []  # List of allowed Telegram user IDs
# Whitelist of allowed commands

allowed_commands:
  blender_script:
    description: "Generate 3D models using Blender scripts"
    timeout: 300
    
  python_script:
    description: "Run Python scripts"
    timeout: 120
    
  file_operation:
    description: "File operations (create, read, write)"
    timeout: 60
    
  open_program:
    description: "Open programs and files"
    timeout: 30

# Security settings
security:
  max_command_length: 10000
  require_confirmation: true
  log_all_actions: true
  blacklist_keywords:
    - "taskkill"
    - "format"
    - "del /s /q"
    - "rd /s /q"
    - "cipher /w"

# Server settings
server:
  host: "127.0.0.1"
  port: 5000
  debug: false
  cors_enabled: true


# Режимы работы агента
modes:
  active: "normal"  # normal / fairplay / curious
  
  normal:
    description: "Полный доступ в рамках safety и whitelist"
  
  fairplay:
    enabled: true
    description: "Честная игра без читов"
    allow_memory_hacks: false
    allow_game_process_injection: false
    allow_only_input_control: true
  
  curious:
    enabled: false
    description: "Режим любопытного ребёнка"
    discord_allowed: false
    max_risk_level: low

# Конфигурация LLM
llm:
  brain_mode: "comet_chat"   # ollama / api / comet_chat
  provider: "perplexity"
  
  ollama:
    enabled: true
    base_url: "http://127.0.0.1:11434"
    model: "llama3"
  
  comet_chat:
    enabled: true
    description: "Модель в браузере Comet управляет агентом через Tampermonkey"
    allow_external_commands: true
